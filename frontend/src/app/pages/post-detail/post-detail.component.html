<section class="post-detail-shell" aria-live="polite">
  <a routerLink="/home" class="back-link">
    <i class="bi bi-arrow-left"></i>
    Back to feed
  </a>

  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-light" role="status"></div>
  </div>

  <div *ngIf="!isLoading && error" class="alert alert-danger" role="alert">
    {{ error }}
  </div>

  <article *ngIf="!isLoading && post" class="post-detail-card shadow-sm">
    <header class="post-detail-header">
      <div>
        <ng-container *ngIf="!isOwner(); else ownerName">
          <a
            class="author"
            [routerLink]="['/users', post.author.id]"
            [attr.aria-label]="'View profile for ' + post.author.name"
          >
            {{ post.author.name }}
          </a>
        </ng-container>
        <ng-template #ownerName>
          <p class="author owner">{{ post.author.name }}</p>
        </ng-template>
        <p class="timestamp">Published {{ post.createdAt | date: 'medium' }}</p>
        <p class="timestamp">Updated {{ post.updatedAt | date: 'medium' }}</p>
      </div>
    </header>

    <h1>{{ post.title }}</h1>
    <p class="body-text">{{ post.description }}</p>

    <div class="media-grid" *ngIf="post.media?.length">
      <ng-container *ngFor="let media of post.media">
        <img *ngIf="media.type === 'IMAGE'" [src]="media.url" [alt]="media.originalFileName || post.title" />
        <video *ngIf="media.type === 'VIDEO'" [src]="media.url" controls></video>
      </ng-container>
    </div>
  </article>
</section>
